<form (ngSubmit)="onSave()" #activiteForm="ngForm" class="activite-form">
  <div class="form-group">
    <label>Nom</label>
    <input [(ngModel)]="activite!.nom" name="nom" required />
  </div>
  <div class="form-group">
    <label>Description</label>
    <textarea [(ngModel)]="activite!.description" name="description" rows="3"></textarea>
  </div>
  <div class="form-row three-cols">
    <div class="form-group col">
      <label>Ville</label>
      <select [(ngModel)]="activite!.ville" name="ville">
        <option [ngValue]="''">-- sélectionner --</option>
        <option *ngFor="let v of villes" [ngValue]="v.nom">{{ v.nom }}</option>
      </select>
    </div>
    <div class="form-group col">
      <label>Type</label>
      <select [(ngModel)]="activite!.type" name="type">
        <option [ngValue]="''">-- sélectionner --</option>
        <option *ngFor="let t of (typeOptions || types)" [ngValue]="t">{{ t }}</option>
      </select>
    </div>
    <div class="form-group col">
      <label>Zone</label>
      <select [(ngModel)]="activite!.zoneId" name="zoneId">
        <option [ngValue]="0">-- sélectionner --</option>
        <option *ngFor="let z of zones" [ngValue]="z.id">{{ z.nom }}</option>
      </select>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group col">
      <label>Durée (Heures / Minutes)</label>
      <div class="duration-split">
        <div class="duration-item">
          <select [(ngModel)]="hours" name="hours">
            <option *ngFor="let h of hoursOptions" [ngValue]="h">{{ h }}h</option>
          </select>
        </div>
        <div class="duration-item">
          <input type="number" min="0" max="59" [(ngModel)]="minutes" name="minutes" />
        </div>
      </div>
    </div>
    <div class="form-group col">
      <label>Prix (EUR)</label>
      <input type="number" step="0.01" min="0" [(ngModel)]="activite!.prix" name="prix" placeholder="Ex. 12.50" />
    </div>
  </div>
  <div class="form-group image-group">
    <label>Image principale</label>
    <input #fileInput type="file" (change)="onFileSelected($event)" />
    <div *ngIf="uploading" class="uploading">Upload en cours...</div>
    <div *ngIf="uploadError" class="error">{{ uploadError }}</div>
    <div class="image-preview" *ngIf="$any(activite).imagePreview">
      <img [src]="$any(activite).imagePreview" alt="Aperçu" />
    </div>
    <div class="media-id" *ngIf="!$any(activite).imagePreview && $any(activite).imagePrincipaleId">
      ID média: {{ $any(activite).imagePrincipaleId }}
    </div>
  </div>
  <div class="modal-actions">
    <button type="button" class="btn-secondary" (click)="cancel.emit()">Annuler</button>
    <button type="submit" class="btn-primary" [disabled]="!activiteForm.form.valid">Enregistrer</button>
  </div>
</form>
