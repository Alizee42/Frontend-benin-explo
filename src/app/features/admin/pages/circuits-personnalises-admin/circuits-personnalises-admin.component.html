<div class="circuits-personnalises-admin">
  <app-header mode="compact"></app-header>

  <main class="page-content">
    <header class="page-header">
      <h1>Gestion des circuits personnalisés</h1>
      <p>Gérez les demandes de circuits sur mesure soumises par vos clients.</p>
    </header>

    <div *ngIf="loading" class="loading">Chargement des demandes...</div>

    <div *ngIf="!loading" class="demandes-table">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Client</th>
            <th>Contact</th>
            <th>Personnes</th>
            <th>Jours</th>
            <th>Zones</th>
            <th>Activités</th>
            <th>Hébergement</th>
            <th>Statut</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let demande of demandes">
            <td>{{ demande.id }}</td>
            <td>{{ demande.client.nom }}</td>
            <td>
              <div>{{ demande.client.email }}</div>
              <div>{{ demande.client.telephone }}</div>
            </td>
            <td>{{ demande.nombrePersonnes }}</td>
            <td>{{ demande.nombreJours }}</td>
            <td>{{ demande.zones.join(', ') }}</td>
            <td>{{ demande.activites.join(', ') }}</td>
            <td>{{ demande.avecHebergement ? 'Oui' : 'Non' }}</td>
            <td>
              <span class="statut" [class]="'statut-' + demande.statut.toLowerCase().replace(' ', '-')">
                {{ demande.statut }}
              </span>
            </td>
            <td>{{ demande.dateCreation }}</td>
            <td>
              <button class="btn-view" (click)="voirDemande(demande)">Voir</button>
              <button class="btn-contact" (click)="contacterClient(demande)">Contacter</button>
              <button class="btn-validate" (click)="validerDemande(demande.id)" *ngIf="demande.statut === 'En attente'">Valider</button>
              <button class="btn-refuse" (click)="refuserDemande(demande.id)" *ngIf="demande.statut === 'En attente'">Refuser</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
</div>