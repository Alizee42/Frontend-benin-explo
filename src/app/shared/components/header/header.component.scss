/* ðŸŒŸ HEADER TRANSPARENT PAR DÃ‰FAUT (PAGE FONCÃ‰E â€“ ACCUEIL) */
.site-header {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  padding: 0.6rem 0.75rem;
  z-index: 1000;
  background: linear-gradient(135deg, #2e7d321a, #fbc02d0d, #dc35451a);
  color: var(--be-light);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.12);
  transition: color .3s ease;
}

/* NOTE: we no longer change the header background for "light" pages.
   Keep the header visually overlayed; only nav links will change color via
   `body.header-light` (see selectors below). */

/* ðŸŒŸ Couleurs du texte (nav) selon le mode */
.site-header .nav-link {
  color: var(--be-light, #ffffff);
}

/* mode clair â†’ liens bleus */
/* .site-header.on-light rules removed â€” use `body.header-light .nav-link` */

/* mode clair â†’ hover */
/* hover rules handled by `body.header-light .nav-link:hover` */

/* ACTIVE */
.site-header .nav-link.active,
.site-header .nav-link.router-link-active {
  background: var(--be-primary-700, #083226);
  color: var(--be-secondary-500, #F4A300);
  border-radius: 6px;
}

/* active rules handled by `body.header-light .nav-link.active` */

/* Hamburger couleur logique */
.hamburger .bar {
  background: var(--be-light, #ffffff);
}

/* hamburger color for light pages handled below via body.header-light */

/* ------------------------------------------------------ */
/* TON CSS EXACT CI-DESSOUS â€“ nettetÃ©, structure, responsive */
/* ------------------------------------------------------ */

.header-inner {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  width: 100%;
  justify-content: space-between;
}

.hamburger {
  display: inline-flex;
  flex-direction: column;
  justify-content: space-between;
  width: 38px;
  height: 32px;
  padding: 6px;
  cursor: pointer;
  background: transparent;
  border: none;
  z-index: 1200;
}

.logo img {
  height: 28px;
}

.brand {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
}

.brand-image {
  height: 34px;
}

.brand-text {
  font-weight: 800;
  font-size: 1.15rem;
  background: linear-gradient(90deg, var(--be-primary), var(--be-secondary), var(--be-danger));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* MOBILE NAV */
.nav {
  position: absolute;
  top: 100%;
  right: 0;
  background: rgba(10,58,42,0.98);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: .5rem;
  transform: scaleY(0);
  transform-origin: top right;
  opacity: 0;
  transition: transform 180ms ease, opacity 180ms ease;
  z-index: 1099;
}

.site-header.open .nav {
  transform: scaleY(1);
  opacity: 1;
}

.nav-link {
  text-decoration: none;
  font-weight: 600;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  letter-spacing: .5px;
  text-transform: uppercase;
  font-size: .85rem;
  transition: .3s ease;
}

/* ðŸ”µ Couleurs par dÃ©faut (pages sombres) */
.nav-link {
  color: #ffffff;
}

.hamburger .bar {
  background: #ffffff;
}

/* ðŸŸ¡ Version claire AUTOMATIQUE sur circuits */
body.header-light .nav-link {
  color: var(--be-primary-500, #0A3A2A) !important;
}

body.header-light .nav-link:hover {
  background: var(--be-primary-700, #083226);
  color: var(--be-on-primary, #ffffff) !important;
}

body.header-light .nav-link.active,
body.header-light .nav-link.router-link-active {
  color: var(--be-primary-500) !important;
  background: var(--be-active-on-light-bg, rgb(244, 163, 0)) !important;
  box-shadow: none !important;
}

body.header-light .hamburger .bar {
  background: var(--be-primary-500, #0A3A2A);
}

/* When header is in 'light' mode (pages with light hero), make mobile nav light
   so text is readable and hamburger remains visible. This overrides the
   default green mobile background used on dark pages. */

.site-header.header-light .nav-link {
  color: var(--be-primary-500, #0A3A2A) !important;
}

.site-header.header-light .nav-link:hover {
  background: rgba(245,245,245,0.9) !important;
  color: var(--be-on-primary, #000000) !important;
}

/* Ensure the hamburger button itself provides contrast on light pages. */
.site-header.header-light .hamburger {
  border-radius: 6px;
}

.site-header.header-light .hamburger .bar {
  background: var(--be-primary-500, #0A3A2A) !important;
}

/* Small visual tweak: make the bars slightly rounded and animate color changes */
.hamburger .bar {
  height: 3px;
  border-radius: 2px;
  transition: background .18s ease, transform .18s ease;
}

/* DESKTOP */
@media (min-width: 720px) {
  .site-header { padding: 1.2rem 2rem; }
  .hamburger { display: none; }
  .nav {
    position: static;
    transform: none;
    opacity: 1;
    flex-direction: row;
    background: transparent;
    padding: 0;
    gap: 1rem;
  }

  .nav-link {
    padding: 0.35rem 0.5rem;
    color: var(--be-light);
  }

  /* desktop: keep using `body.header-light` rules for link color */

  .logo img { height: 42px; }
}

/* MOBILE FULL WIDTH NAV */
@media (max-width: 719px) {
  .nav {
    left: 0;
    right: 0;
    width: 100%;
    padding: 0.5rem 0.75rem;
    border-radius: 0;
  }

  .nav-link {
    display: block;
    padding: 0.9rem 1rem;
  }
}

/* FORCE: highest-specificity rules to ensure links become darker on light heroes */
/* Also support header element data attribute (very high specificity) */
.site-header[data-header-light="true"] .nav-link {
  color: var(--be-primary-500, #0A3A2A) !important;
}
.site-header[data-header-light="true"] .nav-link:hover {
  color: var(--be-primary-700, #083226) !important;
  background: transparent !important;
}
.site-header[data-header-light="true"] .nav-link.active,
.site-header[data-header-light="true"] .nav-link.router-link-active {
  /* Active link on light hero: yellow background with blue text */
  color: var(--be-primary-500) !important;
  background: var(--be-active-on-light-bg, rgb(244, 163, 0)) !important;
  box-shadow: none !important;
}

/* Extra higher-specificity selectors including the .nav wrapper to match compiled selectors
   (do NOT hardcode Angular's _ngcontent attributes; they change between builds). */
.site-header[data-header-light="true"] .nav .nav-link.active,
.site-header[data-header-light="true"] .nav .nav-link.router-link-active,
.site-header.header-light .nav .nav-link.active,
.site-header.header-light .nav .nav-link.router-link-active {
  color: var(--be-primary-500) !important;
  background: var(--be-active-on-light-bg, rgb(244, 163, 0)) !important;
  box-shadow: none !important;
}

/* keep previous body.header-light rules as fallback */
body.header-light .site-header .nav-link {
  color: var(--be-primary-500, #0A3A2A) !important;
}

/* Final mobile override â€” placed at EOF to ensure it wins over other rules
   (matches selectors similar to compiled `_ngcontent` selectors). */
@media (max-width: 719px) {
  body.header-light .hamburger .bar,
  .site-header.header-light .hamburger .bar,
  .site-header[data-header-light="true"] .hamburger .bar,
  body.header-light .site-header .hamburger .bar {
    background: #ffffff !important;
  }
}

/* MOBILE OVERRIDES: keep mobile nav green + white text and default active
   appearance even when a page sets `header-light`. This ensures the mobile
   menu remains consistent and readable across all pages. */
@media (max-width: 719px) {
  /* Force nav background to the default green on mobile */
  .site-header.header-light .nav,
  .site-header[data-header-light="true"] .nav,
  body.header-light .site-header .nav {
    background: rgba(10,58,42,0.98) !important;
  }

  /* Force white text for links on mobile */
  body.header-light .nav-link,
  .site-header.header-light .nav-link,
  .site-header[data-header-light="true"] .nav-link {
    color: #ffffff !important;
  }

  /* Hamburger bars stay white on mobile for contrast */
  body.header-light .hamburger .bar,
  .site-header.header-light .hamburger .bar {
    background: #ffffff !important;
  }

  /* Use the default (dark-green) active background and orange text on mobile */
  body.header-light .nav-link.active,
  .site-header.header-light .nav-link.active,
  .site-header[data-header-light="true"] .nav-link.active {
    background: var(--be-primary-700, #083226) !important;
    color: var(--be-secondary-500, #F4A300) !important;
  }
}
